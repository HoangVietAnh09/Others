# Bài 1: Tấn công, xâm nhập và kiểm soát server Pickle Rick – TryHackMe (Phần 1)
## Quy trình penetration testing 
Quy trình penetration testing có thể được chia thành các bước như sau:

![image](https://github.com/HoangVietAnh09/Others/assets/111860567/c92e41c3-3881-45fc-98d2-1607f15be0c2)

### Performing reconnaissance (Thu thập thông tin từ bên ngoài)
pentester trong vai một người dùng ngoài mạng bình thường có mục tiêu là thu thập càng nhiều thông tin về server nạn nhân càng tốt bằng cách sử dụng các công cụ như nmap, dirsearch, gobuster, v.v. Nhằm mục đích trả lời các câu hỏi sau:

* IP của server nạn nhân là bao nhiêu?
* Máy nạn nhân có đang online hay không?
* Server nạn nhân có bao nhiêu dịch vụ đang chạy?
* Version của mỗi dịch vụ là bao nhiêu?
* Server nạn nhân có bao nhiêu ports đang mở và ports nào đang bị tường lửa chặn (filtered)?
* Server nạn nhân đang chạy hệ điều hành (OS) nào?
* Nếu server nạn nhân có chạy một website
  * Có xác định được tên nền tảng web và version hay không?
  * Front end code có chứa thông tin nhạy cảm hay không?
  * Có tìm được file robot.txt, hay những thư mục hoặc file ẩn trên web hay không?
  * Có tìm được trang đăng nhập web hay không? v.v.
* Nếu server có chạy SMB hoặc FTP
  * Có tìm được fileshare hay không?
  * Account anonymous có mở hay không?
  * Có tìm và đọc được file lưu trữ bên trong hay không?
* v.v
### Identifying vulnerabilities (Xác định lỗ hổng có thể xâm nhập)
Sau khi đã thu thập được thông tin ở B1, pentester sẽ bắt đầu phân tích, chọn lọc và tiến hành xâm nhập thử nghiệm để tìm ra những cách xâm nhập hệ thống nạn nhân tối ưu nhất ví dụ như:

* Default login (Mật khẩu đăng nhập mặc định)
* SQL injection/noSQL injection
* Local File Inclusion (LFI)
* File/command injection
* CVE vulnerabilities
* Bruteforce/dictionary attack
* v.v

### Exploiting vulnerabilities (Tiến hành xâm nhập)
Tùy theo lỗi bảo mật được khai thác mà pentester có thể ngay lập tức lấy được giao diện dòng lệnh dùng để điều khiển máy nạn nhân hoặc chỉ có thể xâm nhập vào admin dashboard của nền tảng đang được sử dụng.
### Privileges escalation (Nâng quyền quản trị)
 Sau khi xâm nhập thành công vào server nạn nhân, bạn thường chỉ có được quyền quản trị của một người dùng bình thường với quyền hạn hạn chế. Nhiệm vụ tiếp theo pentester cần làm đó là tìm cách để nâng quyền quản trị của mình lên cấp cao nhất (quyền root) để nắm toàn quyền kiểm soát server nạn nhân.
 ### Gathering information (Thu thập thông tin nội mạng)
 Sau khi thành công có được quyền root của server nạn nhân, nếu hợp đồng với khách hàng yêu cầu bạn pentest luôn toàn bộ hệ thống mạng nội bộ, bạn sẽ tiếp tục sử dụng server mình vừa chiếm được để thu thập thông tin nội mạng để tìm hướng tấn công tiếp. 
 ### Creating Pivot point (Tạo hệ thống tấn công nội mạng)
 Sau khi có được thông tin nội mạng cần thiết, pentester sẽ sử dụng hệ thống mà mình đang kiểm soát để cài đặt các phần mềm phục vụ cho việc tấn công nội mạng. 
### Cleaning up (Dọn dẹp)
Sau khi pentest xong, pentest sẽ gỡ bỏ những phần mềm đã cài đặt trên máy nạn nhân.
### Reporting (Báo cáo)
Pentester viết báo cáo mô tả lại quá trình pentest, lỗ hổng đã khai thác và đánh giá mức độ nghiêm trọng, đồng thời đề ra giải pháp khắc phục lỗ hổng.

Quy trình trên chỉ là một quy trình chung và khá tối giản. Thực tế khi bạn nhận hợp đồng pentest, điều khoản sẽ phải ghi rõ giới hạn mà bạn được pentest nên quy trình chi tiết có thể thay đổi. 
## Thực hành pentest phòng Pickle Rick – TryHackMe

